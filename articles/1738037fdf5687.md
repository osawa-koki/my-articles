---
title: "AWS CLIã§SAML SSOãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹"
emoji: "ğŸ’¨"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["aws", "sso"]
published: true
---

## AWS CLIã§SAML SSOãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹

AWS CLI ã§ SAML SSO ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚  

## æ‰‹é †

### 0. å‰ææ¡ä»¶

- AWS CLI ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã€‚
- IAM Identity Center ã§ SAML SSO ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã€‚

### 1. è¨­å®š

ã“ã®æ‰‹é †ã¯ã€ä¸€åº¦ã ã‘å®Ÿè¡Œã—ã¾ã™ã€‚ ã€€
æ¬¡å›ä»¥é™ã¯ãƒ­ã‚°ã‚¤ãƒ³ã®æ‰‹é †ã ã‘ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚  

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€SAML SSO ã®è¨­å®šã—ã¾ã™ã€‚  

```shell
aws configure sso
```

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å¾“ã£ã¦ã€è¨­å®šã—ã¾ã™ã€‚  
é€”ä¸­ã§ãƒ–ãƒ©ã‚¦ã‚¶ãŒé–‹ãã€SAML SSO èªè¨¼ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚  

```shell
$ aws configure sso

SSO session name (Recommended): <ã‚»ãƒƒã‚·ãƒ§ãƒ³å>
SSO start URL [None]: <SSO start URL>
SSO region [None]: <ãƒªãƒ¼ã‚¸ãƒ§ãƒ³>
SSO registration scopes [sso:account:access]: sso:account:access
Attempting to automatically open the SSO authorization page in your default browser.
If the browser does not open or you wish to use a different device to authorize this request, open the following URL:

https://device.sso.ap-northeast-1.amazonaws.com/

Then enter the code:

<ã‚³ãƒ¼ãƒ‰>
The only AWS account available to you is: <ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID>
Using the account ID <ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID>
The only role available to you is: <ãƒ­ãƒ¼ãƒ«å>
Using the role name "<ãƒ­ãƒ¼ãƒ«å>"
CLI default client Region [ap-northeast-1]: <ãƒªãƒ¼ã‚¸ãƒ§ãƒ³>
CLI default output format [json]: json
CLI profile name [AdministratorAccess-xxxxx]: <ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å>

To use this profile, specify the profile name using --profile, as shown:

aws s3 ls --profile <ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å>
```

è©¦ã—ã«ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚  

```shell
aws s3 ls --profile <ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å>
```

æ­£ã—ãã€S3 ã®ãƒã‚±ãƒƒãƒˆä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ã€‚  

### 2. ãƒ­ã‚°ã‚¤ãƒ³

è¨­å®šå¾Œã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã¾ã™ã€‚  
ãƒ–ãƒ©ã‚¦ã‚¶ãŒé–‹ãã€SAML SSO ã®èªè¨¼ã—ã¾ã™ã€‚  

```shell
aws sso login --profile <ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å>
```

## å‚è€ƒæ–‡çŒ®

- [Configuring IAM Identity Center authentication with the AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html)

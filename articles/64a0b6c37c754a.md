---
title: "SAMã§IAMãƒ­ãƒ¼ãƒ«ä½œæˆå¤±æ•—æ™‚ã«'***Requires capabilities : [CAPABILITY_NAMED_IAM]***'ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ"
emoji: "ğŸ•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["AWS", "SAM", "CloudFormation", "IAM"]
published: true
---

## SAMã§IAMãƒ­ãƒ¼ãƒ«ä½œæˆå¤±æ•—æ™‚ã«'Status: FAILED. Reason: Requires capabilities : [CAPABILITY_NAMED_IAM]'ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã«ä¿®æ­£ã™ã‚‹ã¹ãç®‡æ‰€

`sam deploy`æ™‚ã«`--capabilities CAPABILITY_NAMED_IAM`ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ç›´ã‚Šã¾ã™ã€‚  

`--capabilities`ã«ã¤ã„ã¦ã¯ã€[ã“ã¡ã‚‰](https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-iam-template.html#using-iam-capabilities)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚  

## ã‚¨ãƒ©ãƒ¼å…¨æ–‡

```error
Error: Failed to create changeset for the stack: *****, ex: Waiter ChangeSetCreateComplete failed: Waiter encountered a terminal failure state: For expression "Status" we matched expected path: "FAILED" Status: FAILED. Reason: Requires capabilities : [CAPABILITY_NAMED_IAM]
```

## åŸå› 

SAMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å†…ã§åå‰ä»˜ãIAMãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¦ã„ã‚‹å ´åˆã«ç™ºç”Ÿã—ã¾ã™ã€‚  
`template.yaml`ã®`Resources`å†…ã§`AWS::IAM::Role`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚  

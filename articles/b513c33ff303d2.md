---
title: "AWSã®S3ãƒã‚±ãƒƒãƒˆã®ã‚­ãƒ¼ä¸€è¦§å–å¾—æ™‚ã«æ¨©é™ä¸è¶³ã«ãªã‚‹ã€ã€ã€"
emoji: "â›³"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["AWS", "S3", "IAM"]
published: true
---

## AWSã®S3ãƒã‚±ãƒƒãƒˆã®ã‚­ãƒ¼ä¸€è¦§å–å¾—æ™‚ã«æ¨©é™ä¸è¶³ã«ãªã‚‹

`ListBucket`ã«å¯¾ã™ã‚‹æ¨©é™ã¨`GetObject`ã«å¯¾ã™ã‚‹æ¨©é™ã«åŠ ãˆã¦ã€`arn:aws:s3:::${Bucket}`ã®æ¨©é™ãŒå¿…è¦ã§ã™ã€‚  
ãŠãã‚‰ãã€`arn:aws:s3:::${Bucket}/*`ã¨ã ã‘è¨˜è¿°ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚  

SAM ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ã€‚  

```sam
Resources:
  MyBucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: "ğŸ¶ğŸ¶ğŸ¶"
      AccessControl: Private
      VersioningConfiguration:
        Status: Enabled
  MyLambdaRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: "ğŸ™ğŸ™ğŸ™"
      AssumeRolePolicyDocument:
        Version: '2012-10-17'
        Statement:
          - Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
            Action: sts:AssumeRole
      Policies:
        - PolicyName: "ğŸ¬ğŸ¬ğŸ¬"
          PolicyDocument:
            Version: '2012-10-17'
            Statement:
              - Sid: "ğŸ¸ğŸ¸ğŸ¸"
                Effect: Allow
                Action:
                  - s3:GetObject
                  - s3:PutObject
                  - s3:DeleteObject
                  - s3:ListBucket
                Resource: !Sub "arn:aws:s3:::${MyBucket}/*"
              - Sid: "ğŸ™€ğŸ™€ğŸ™€"
                Effect: Allow
                Action:
                  - s3:ListBucket
                Resource: !Sub "arn:aws:s3:::${MyBucket}"
```

## ãªãœ

ãƒã‚±ãƒƒãƒˆãã®ã‚‚ã®ã«å¯¾ã™ã‚‹æ¨©é™ãŒãªã„ã¨ã€ã‚­ãƒ¼ä¸€è¦§ã‚’å–å¾—ã§ããªã„ã‹ã‚‰ã§ã™ã€‚  
`arn:aws:s3:::${MyBucket}/*`ã§ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã™ã‚‹æ¨©é™ã‚’ä¸ãˆã¦ã„ã‚‹ã ã‘ã§ã€ãƒã‚±ãƒƒãƒˆãã®ã‚‚ã®ã«å¯¾ã™ã‚‹æ¨©é™ã¯ä¸ãˆã¦ã„ãªã„ãŸã‚ã€ã‚­ãƒ¼ä¸€è¦§ã‚’å–å¾—ã§ãã¾ã›ã‚“ã€‚  
